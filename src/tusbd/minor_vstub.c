/*
 *
 *  Copyright (C) 2007-2020 SimplyCore, LLC
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 *
 *
 */

#ifdef _USBD_ENABLE_VHCI_
#include "usbd.h"
ssize_t IIIIIlIII(void*,const char __user*,size_t);ssize_t lIlIIllll(void*,char 
__user*,size_t);long llllllIIl(void*,unsigned int,unsigned long);
#ifdef CONFIG_COMPAT
long IllIlllII(void*,unsigned int,unsigned long);
#endif
int lIIIIIIIl(void*,int);int IIllIIlll(void*,int);void llIllIllI(void*);void 
IlllllIII(void*);unsigned int IllllIIll(void*,struct file*,poll_table*lIIllI);
int IIlllIIlI(void*,struct vm_area_struct*);static struct lllIIIlI IllIIIIll[]={
{"\x74\x79\x70\x65","\x76\x73\x74\x75\x62",NULL},{NULL,NULL,NULL},};int 
IllIIlllI(struct lIlIIl*llllI){struct IIIlll*IIlII;IIlII=lIllllI(sizeof(*IIlII),
GFP_KERNEL);if(IIlII){mutex_init(&IIlII->mutex);IIlII->context=llllI;IIlII->
llIllI=-(0x167a+3607-0x2490);IIlII->ops.open=lIIIIIIIl;IIlII->ops.release=
IIllIIlll;IIlII->ops.unlocked_ioctl=llllllIIl;
#ifdef CONFIG_COMPAT
IIlII->ops.compat_ioctl=IllIlllII;
#endif
IIlII->ops.read=lIlIIllll;IIlII->ops.write=IIIIIlIII;IIlII->ops.poll=IllllIIll;
IIlII->ops.mmap=IIlllIIlI;IIlII->ops.IlIllIII=llIllIllI;IIlII->ops.llIIllll=
IlllllIII;IIlII->IIllllIl=IllIIIIll;llllI->IIlII=IIlII;return
(0x13c0+4298-0x248a);}return-ENOMEM;}void lIllllIIl(struct lIlIIl*llllI){if(
llllI->IIlII){IlIIIIII(llllI);lIlIll(llllI->IIlII);llllI->IIlII=NULL;}}int 
lIllIllII(struct lIlIIl*llllI){return IllllIlI(llllI->IIlII,(0x75d+5005-0x1ae8),
-(0x9d3+957-0xd8f));}void IlIIIIII(struct lIlIIl*llllI){lllIllII(llllI->IIlII);}
ssize_t lIlIIllll(void*context,char __user*IIIlI,size_t IlIII){Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x72\x65\x61\x64\x3a" "\n"
);return(0xb05+3133-0x1742);}ssize_t IIIIIlIII(void*context,const char __user*
IIIlI,size_t IlIII){Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x77\x72\x69\x74\x65" "\n"
);return(0x1171+1357-0x16be);}int lIIlIllII(struct lIlIIl*llllI,void __user*
IIIlI){unsigned long offset=(unsigned long)IIIlI;int IIIll;unsigned long flags;
struct lllIIl*IIlIl;void*IlIIl;size_t IlIIIl;Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x2b\x2b" "\n"
);if(offset>=llllI->lIIllIll){Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x2d\x2d\x20\x69\x6e\x76\x61\x6c\x69\x64\x20\x61\x72\x67\x75\x6d\x65\x6e\x74" "\n"
);return-EINVAL;}if((llllI->lIIllIll-offset)<sizeof(IlIllI)){Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x2d\x2d\x20\x69\x6e\x76\x61\x6c\x69\x64\x20\x61\x72\x67\x75\x6d\x65\x6e\x74" "\n"
);return-EINVAL;}if(llllI->IIlIIllI){Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x2d\x2d\x20\x72\x65\x73\x65\x74\x20\x69\x6e\x20\x70\x72\x6f\x67\x72\x65\x73\x73" "\n"
);return-ENODATA;}IlIIl=(char*)llllI->IIlIIlIl+offset;IlIIIl=((IlIllI*)IlIIl)->
IIllI;IIlIl=NULL;
spin_lock_irqsave(&llllI->IllIll,flags);if(!list_empty(&llllI->IIlllll)){IIlIl=
list_entry(llllI->IIlllll.next,struct lllIIl,llllIl);list_del_init(&IIlIl->
llllIl);}spin_unlock_irqrestore(&llllI->IllIll,flags);Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x70\x76\x72\x65\x71\x20\x3d\x20\x30\x78\x25\x70" "\n"
,IIlIl);if(IIlIl){IIIll=IIIIlIIIl(llllI,IIlIl,IlIIl,IlIIIl);if(IIIll>=
(0x1080+2954-0x1c0a)){spin_lock_irqsave(&llllI->IllIll,flags);if(lIIIIIIl(IIlIl)
){
spin_unlock_irqrestore(&llllI->IllIll,flags);Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x72\x65\x71\x75\x65\x73\x74\x20\x68\x61\x73\x20\x62\x65\x65\x6e\x20\x63\x61\x6e\x63\x65\x6c\x6c\x65\x64\x21" "\n"
);IllIIllI(IIlIl,-ECONNRESET);IIlIlllI(IIlIl);IIIll=-ENODATA;}else{
list_add_tail(&IIlIl->llllIl,&llllI->Illlllll);spin_unlock_irqrestore(&llllI->
IllIll,flags);llIlIIl((IIIII)IlIIl);}}else if(IIIll==-EMSGSIZE){
if(lIIIIIIl(IIlIl)){
spin_unlock_irqrestore(&llllI->IllIll,flags);Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x72\x65\x71\x75\x65\x73\x74\x20\x68\x61\x73\x20\x62\x65\x65\x6e\x20\x63\x61\x6e\x63\x65\x6c\x6c\x65\x64\x21" "\n"
);IllIIllI(IIlIl,-ECONNRESET);IIlIlllI(IIlIl);IIIll=-ENODATA;}else{Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x6e\x6f\x74\x20\x65\x6e\x6f\x75\x67\x68\x20\x62\x75\x66\x66\x65\x72\x20\x74\x6f\x20\x70\x61\x63\x6b\x20\x74\x68\x65\x20\x72\x65\x71\x75\x65\x73\x74" "\n"
);
list_add(&IIlIl->llllIl,&llllI->IIlllll);spin_unlock_irqrestore(&llllI->IllIll,
flags);
wake_up(&llllI->lIIllI);}}else{Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x63\x61\x6e\x20\x6e\x6f\x74\x20\x70\x61\x63\x6b\x20\x72\x65\x71\x75\x65\x73\x74\x2c\x20\x72\x65\x73\x75\x6c\x74\x3d\x25\x64" "\n"
,IIIll);IllIIllI(IIlIl,IIIll);IIlIlllI(IIlIl);IIIll=-ENODATA;}}else{Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x6e\x6f\x20\x65\x6e\x74\x72\x79" "\n"
);IIIll=-ENODATA;}Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x2d\x2d\x20\x72\x65\x73\x75\x6c\x74\x3d\x25\x64" "\n"
,IIIll);return IIIll;}int IIllllIIIl(struct lIlIIl*llllI,void __user*IIIlI){
unsigned long offset=(unsigned long)IIIlI;int IIIll;IIIII IlIlI;unsigned long 
flags;struct lllIIl*IIlIl;struct lllIIl*Illllll;Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x77\x72\x69\x74\x65\x5f\x75\x6e\x72\x62\x3a\x20\x2b\x2b" "\n"
);if(offset>=llllI->IIlIIIIl){Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x2d\x2d\x20\x69\x6e\x76\x61\x6c\x69\x64\x20\x61\x72\x67\x75\x6d\x65\x6e\x74" "\n"
);return-EINVAL;}if((llllI->IIlIIIIl-offset)<sizeof(IlIllI)){Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x2d\x2d\x20\x69\x6e\x76\x61\x6c\x69\x64\x20\x61\x72\x67\x75\x6d\x65\x6e\x74" "\n"
);return-EINVAL;}IlIlI=(IIIII)((char*)llllI->lllIllll+offset);if((llllI->
IIlIIIIl-offset)<IlIlI->lllII.IIllI){Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x2d\x2d\x20\x69\x6e\x76\x61\x6c\x69\x64\x20\x64\x61\x74\x61" "\n"
);return-EINVAL;}llIlIIl(IlIlI);IIlIl=NULL;spin_lock_irqsave(&llllI->IllIll,
flags);list_for_each_entry(Illllll,&llllI->Illlllll,llllIl){if(Illllll->lllIl==
IlIlI->lllII.IlIIll){
list_del_init(&Illllll->llllIl);
IIlIl=Illllll;break;}}spin_unlock_irqrestore(&llllI->IllIll,flags);if(IIlIl){int
 status;IIIll=IIlIlIIIl(llllI,IIlIl,IlIlI,&status);if(IIIll<(0x830+4134-0x1856))
{
spin_lock_irqsave(&llllI->IllIll,flags);if(lIIIIIIl(IIlIl)){
spin_unlock_irqrestore(&llllI->IllIll,flags);IllIIllI(IIlIl,-ECONNRESET);
IIlIlllI(IIlIl);}else{



list_add_tail(&IIlIl->llllIl,&llllI->Illlllll);spin_unlock_irqrestore(&llllI->
IllIll,flags);}}else{IllIIllI(IIlIl,status);IIlIlllI(IIlIl);}}else{Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x77\x72\x69\x74\x65\x5f\x75\x6e\x72\x62\x3a\x20\x72\x65\x71\x75\x65\x73\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64" "\n"
);IIIll=(0x5c3+3389-0x1300);}Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x77\x72\x69\x74\x65\x5f\x75\x6e\x72\x62\x3a\x20\x2d\x2d\x20\x72\x65\x73\x75\x6c\x74\x3d\x25\x64" "\n"
,IIIll);return IIIll;}int IllIIIllI(struct lIlIIl*llllI,struct IIlllIIll __user*
ioctl){IIIIl IlIll;IIIIl devnum;IIIIl busnum;if(get_user(IlIll,&ioctl->lIIlII.
IIllllI)<(0x17f2+483-0x19d5))return-EFAULT;if(IlIll!=sizeof(struct IIlllIIll))
return-EINVAL;IllIlIlII(llllI,&busnum,&devnum);if(put_user(busnum,&ioctl->busnum
)<(0x616+3284-0x12ea))return-EFAULT;if(put_user(devnum,&ioctl->devnum)<
(0xe99+2768-0x1969))return-EFAULT;return(0x19e8+1121-0x1e49);}long lIIllIllI(
void*context,unsigned int lIIIIl,void __user*IlIIII){struct lIlIIl*llllI=context
;int IIIll=(0xcc8+1804-0x13d4);Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x69\x6f\x63\x74\x6c\x3a\x20\x2b\x2b\x20\x63\x6d\x64\x3d\x25\x64\x20\x61\x72\x67\x3d\x30\x78\x25\x70" "\n"
,lIIIIl,IlIIII);switch(lIIIIl){case llIIlIlII:IIIll=lIIlIllII(llllI,IlIIII);
break;case lIIIllIll:IIIll=IIllllIIIl(llllI,IlIIII);break;case IlIllIlIl:IIIll=
IllIIIllI(llllI,IlIIII);break;default:Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x69\x6f\x63\x74\x6c\x3a\x20\x75\x6e\x6b\x6e\x6f\x77\x6e\x20\x69\x6f\x63\x74\x6c" "\n"
);IIIll=-EINVAL;break;}Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x69\x6f\x63\x74\x6c\x3a\x20\x2d\x2d\x20\x72\x65\x73\x75\x6c\x74\x3d\x25\x64" "\n"
,IIIll);return IIIll;}long llllllIIl(void*context,unsigned int lIIIIl,unsigned 
long IlIIII){return lIIllIllI(context,lIIIIl,(void __user*)IlIIII);}
#ifdef CONFIG_COMPAT
long IllIlllII(void*context,unsigned int lIIIIl,unsigned long IlIIII){return 
lIIllIllI(context,lIIIIl,compat_ptr(IlIIII));}
#endif
int IIlllIIlI(void*context,struct vm_area_struct*llIIIlI){int IIIll;struct 
lIlIIl*llllI=context;void*IIIlI;unsigned long IIlIIl;unsigned long offset;Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x6d\x6d\x61\x70\x3a\x20\x2b\x2b" "\n"
);IIlIIl=llIIIlI->vm_end-llIIIlI->vm_start;offset=llIIIlI->vm_pgoff<<PAGE_SHIFT;
if(IIlIIl<sizeof(IlIllI)||IIlIIl>lIlIlIII){Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x6d\x6d\x61\x70\x3a\x20\x2d\x2d\x20\x69\x6e\x76\x61\x6c\x69\x64\x20\x6c\x65\x6e\x67\x74\x68" "\n"
);return-EINVAL;}if(offset!=(0x1037+667-0x12d2)&&offset!=0x80000000U){Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x6d\x6d\x61\x70\x3a\x20\x2d\x2d\x20\x69\x6e\x76\x61\x6c\x69\x64\x20\x6f\x66\x66\x73\x65\x74" "\n"
);return-EINVAL;}IIIlI=vmalloc(IIlIIl);if(IIIlI==NULL){Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x6d\x6d\x61\x70\x3a\x20\x6e\x6f\x20\x6d\x65\x6d\x6f\x72\x79\x20\x66\x6f\x72\x20\x77\x72\x69\x74\x65\x62\x75\x66" "\n"
);return-ENOMEM;}
IIIll=lIIIIIIII(IIIlI,llIIIlI);if(IIIll==(0xd5d+6553-0x26f6)){if(offset==
(0xe88+4045-0x1e55)){Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x6d\x6d\x61\x70\x3a\x20\x6d\x61\x70\x20\x72\x65\x61\x64\x62\x75\x66" "\n"
);if(llllI->IIlIIlIl)vfree(llllI->IIlIIlIl);llllI->IIlIIlIl=IIIlI;llllI->
lIIllIll=IIlIIl;}else{Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x6d\x6d\x61\x70\x3a\x20\x6d\x61\x70\x20\x77\x72\x69\x74\x65\x62\x75\x66" "\n"
);if(llllI->lllIllll)vfree(llllI->lllIllll);llllI->lllIllll=IIIlI;llllI->
IIlIIIIl=IIlIIl;}}Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x6d\x6d\x61\x70\x3a\x20\x2d\x2d\x20\x72\x65\x73\x75\x6c\x74\x3d\x25\x64" "\n"
,IIIll);return IIIll;}

int lIIIIIIIl(void*context,int IIIIIlI){int IIIll=(0x205b+11-0x2066);struct 
lIlIIl*llllI=context;Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x6f\x70\x65\x6e\x3a\x20\x2b\x2b\x20\x25\x64" "\n"
,IIIIIlI);if(IIIIIlI==(0x157d+4480-0x26fc)){
llllI=llllI;
}Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x6f\x70\x65\x6e\x3a\x20\x2d\x2d\x20\x72\x65\x73\x75\x6c\x74\x3d\x25\x64" "\n"
,IIIll);return IIIll;}

int IIllIIlll(void*context,int IIIIIlI){struct lIlIIl*llllI=context;Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x72\x65\x6c\x65\x61\x73\x65\x20\x25\x64" "\n"
,IIIIIlI);if(IIIIIlI==(0x1383+4987-0x26fe)){if(llllI->IIlIIlIl){vfree(llllI->
IIlIIlIl);llllI->IIlIIlIl=NULL;}if(llllI->lllIllll){vfree(llllI->lllIllll);llllI
->lllIllll=NULL;}

}return(0x125c+1531-0x1857);}void llIllIllI(void*context){struct lIlIIl*llllI=
context;IlllllII(llllI);}void IlllllIII(void*context){struct lIlIIl*llllI=
context;IlIllIIl(llllI);}unsigned int IllllIIll(void*context,struct file*lIlllI,
poll_table*lIIllI){int IIIllIII;unsigned long flags;struct lIlIIl*llllI=context;
poll_wait(lIlllI,&llllI->lIIllI,lIIllI);spin_lock_irqsave(&llllI->IllIll,flags);
IIIllIII=list_empty(&llllI->IIlllll);spin_unlock_irqrestore(&llllI->IllIll,flags
);if(!IIIllIII&&!llllI->IIlIIllI){Illll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x70\x6f\x6c\x6c\x3a\x20\x71\x75\x65\x75\x65\x20\x6e\x6f\x74\x20\x65\x6d\x70\x74\x79" "\n"
);return((POLLOUT|POLLWRNORM)|(POLLIN|POLLRDNORM));}return(POLLOUT|POLLWRNORM);}
#endif 

