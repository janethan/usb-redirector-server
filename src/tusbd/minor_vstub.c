/*
 *
 *  Copyright (C) 2007-2020 SimplyCore, LLC
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 *
 *
 */

#ifdef _USBD_ENABLE_VHCI_
#include "usbd.h"
ssize_t IIIIIllIl(void*,const char __user*,size_t);ssize_t lIlIIllll(void*,char 
__user*,size_t);long lIlIIIIIl(void*,unsigned int,unsigned long);
#ifdef CONFIG_COMPAT
long IllIlllII(void*,unsigned int,unsigned long);
#endif
int IlllIIlIl(void*,int);int lllIllIII(void*,int);void llIllIllI(void*);void 
IlllllIII(void*);unsigned int IllllIIll(void*,struct file*,poll_table*lIIllI);
int IIlllIIlI(void*,struct vm_area_struct*);static struct lIIIllll IllIIIIll[]={
{"\x74\x79\x70\x65","\x76\x73\x74\x75\x62",NULL},{NULL,NULL,NULL},};int 
llllIlIII(struct lIlIIl*lIllI){struct IIIlll*lllll;lllll=lIllllI(sizeof(*lllll),
GFP_KERNEL);if(lllll){mutex_init(&lllll->mutex);lllll->context=lIllI;lllll->
llIllI=-(0x16ac+1545-0x1cb4);lllll->ops.open=IlllIIlIl;lllll->ops.release=
lllIllIII;lllll->ops.unlocked_ioctl=lIlIIIIIl;
#ifdef CONFIG_COMPAT
lllll->ops.compat_ioctl=IllIlllII;
#endif
lllll->ops.read=lIlIIllll;lllll->ops.write=IIIIIllIl;lllll->ops.poll=IllllIIll;
lllll->ops.mmap=IIlllIIlI;lllll->ops.IlIIlIII=llIllIllI;lllll->ops.IlIllIII=
IlllllIII;lllll->IlllIIII=IllIIIIll;lIllI->lllll=lllll;return(0xe62+2651-0x18bd)
;}return-ENOMEM;}void lIllllIIl(struct lIlIIl*lIllI){if(lIllI->lllll){llllIIlI(
lIllI);lIlIll(lIllI->lllll);lIllI->lllll=NULL;}}int lIllIllII(struct lIlIIl*
lIllI){return IllllIlI(lIllI->lllll,(0xdc+343-0x231),-(0xe1a+3981-0x1da6));}void
 llllIIlI(struct lIlIIl*lIllI){lllIllII(lIllI->lllll);}ssize_t lIlIIllll(void*
context,char __user*IllIl,size_t IIIIl){lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x72\x65\x61\x64\x3a" "\n"
);return(0x850+3255-0x1507);}ssize_t IIIIIllIl(void*context,const char __user*
IllIl,size_t IIIIl){lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x77\x72\x69\x74\x65" "\n"
);return(0x1758+44-0x1784);}int lIIlIllII(struct lIlIIl*lIllI,void __user*IllIl)
{unsigned long offset=(unsigned long)IllIl;int IlIlI;unsigned long flags;struct 
lllIIl*IllII;void*llIIl;size_t IlIIIl;lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x2b\x2b" "\n"
);if(offset>=lIllI->llIlllll){lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x2d\x2d\x20\x69\x6e\x76\x61\x6c\x69\x64\x20\x61\x72\x67\x75\x6d\x65\x6e\x74" "\n"
);return-EINVAL;}if((lIllI->llIlllll-offset)<sizeof(IlIllI)){lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x2d\x2d\x20\x69\x6e\x76\x61\x6c\x69\x64\x20\x61\x72\x67\x75\x6d\x65\x6e\x74" "\n"
);return-EINVAL;}if(lIllI->IlIlIIll){lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x2d\x2d\x20\x72\x65\x73\x65\x74\x20\x69\x6e\x20\x70\x72\x6f\x67\x72\x65\x73\x73" "\n"
);return-ENODATA;}llIIl=(char*)lIllI->IIlIIlIl+offset;IlIIIl=((IlIllI*)llIIl)->
IIIII;IllII=NULL;
spin_lock_irqsave(&lIllI->IIllII,flags);if(!list_empty(&lIllI->llIllIl)){IllII=
list_entry(lIllI->llIllIl.next,struct lllIIl,llllIl);list_del_init(&IllII->
llllIl);}spin_unlock_irqrestore(&lIllI->IIllII,flags);lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x70\x76\x72\x65\x71\x20\x3d\x20\x30\x78\x25\x70" "\n"
,IllII);if(IllII){IlIlI=IIIIlIIIl(lIllI,IllII,llIIl,IlIIIl);if(IlIlI>=
(0x690+2469-0x1035)){spin_lock_irqsave(&lIllI->IIllII,flags);if(lIIIlIII(IllII))
{
spin_unlock_irqrestore(&lIllI->IIllII,flags);lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x72\x65\x71\x75\x65\x73\x74\x20\x68\x61\x73\x20\x62\x65\x65\x6e\x20\x63\x61\x6e\x63\x65\x6c\x6c\x65\x64\x21" "\n"
);IllIIllI(IllII,-ECONNRESET);IIlIlllI(IllII);IlIlI=-ENODATA;}else{
list_add_tail(&IllII->llllIl,&lIllI->lllIlllI);spin_unlock_irqrestore(&lIllI->
IIllII,flags);llIlIIl((IIlII)llIIl);}}else if(IlIlI==-EMSGSIZE){
if(lIIIlIII(IllII)){
spin_unlock_irqrestore(&lIllI->IIllII,flags);lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x72\x65\x71\x75\x65\x73\x74\x20\x68\x61\x73\x20\x62\x65\x65\x6e\x20\x63\x61\x6e\x63\x65\x6c\x6c\x65\x64\x21" "\n"
);IllIIllI(IllII,-ECONNRESET);IIlIlllI(IllII);IlIlI=-ENODATA;}else{lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x6e\x6f\x74\x20\x65\x6e\x6f\x75\x67\x68\x20\x62\x75\x66\x66\x65\x72\x20\x74\x6f\x20\x70\x61\x63\x6b\x20\x74\x68\x65\x20\x72\x65\x71\x75\x65\x73\x74" "\n"
);
list_add(&IllII->llllIl,&lIllI->llIllIl);spin_unlock_irqrestore(&lIllI->IIllII,
flags);
wake_up(&lIllI->lIIllI);}}else{lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x63\x61\x6e\x20\x6e\x6f\x74\x20\x70\x61\x63\x6b\x20\x72\x65\x71\x75\x65\x73\x74\x2c\x20\x72\x65\x73\x75\x6c\x74\x3d\x25\x64" "\n"
,IlIlI);IllIIllI(IllII,IlIlI);IIlIlllI(IllII);IlIlI=-ENODATA;}}else{lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x6e\x6f\x20\x65\x6e\x74\x72\x79" "\n"
);IlIlI=-ENODATA;}lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x2d\x2d\x20\x72\x65\x73\x75\x6c\x74\x3d\x25\x64" "\n"
,IlIlI);return IlIlI;}int lIIlllIIIl(struct lIlIIl*lIllI,void __user*IllIl){
unsigned long offset=(unsigned long)IllIl;int IlIlI;IIlII IIlIl;unsigned long 
flags;struct lllIIl*IllII;struct lllIIl*Illllll;lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x77\x72\x69\x74\x65\x5f\x75\x6e\x72\x62\x3a\x20\x2b\x2b" "\n"
);if(offset>=lIllI->IIlIIIIl){lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x2d\x2d\x20\x69\x6e\x76\x61\x6c\x69\x64\x20\x61\x72\x67\x75\x6d\x65\x6e\x74" "\n"
);return-EINVAL;}if((lIllI->IIlIIIIl-offset)<sizeof(IlIllI)){lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x2d\x2d\x20\x69\x6e\x76\x61\x6c\x69\x64\x20\x61\x72\x67\x75\x6d\x65\x6e\x74" "\n"
);return-EINVAL;}IIlIl=(IIlII)((char*)lIllI->lllIllll+offset);if((lIllI->
IIlIIIIl-offset)<IIlIl->IlIII.IIIII){lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x72\x65\x61\x64\x5f\x75\x6e\x72\x62\x3a\x20\x2d\x2d\x20\x69\x6e\x76\x61\x6c\x69\x64\x20\x64\x61\x74\x61" "\n"
);return-EINVAL;}llIlIIl(IIlIl);IllII=NULL;spin_lock_irqsave(&lIllI->IIllII,
flags);list_for_each_entry(Illllll,&lIllI->lllIlllI,llllIl){if(Illllll->lIlIl==
IIlIl->IlIII.IIIlIl){
list_del_init(&Illllll->llllIl);
IllII=Illllll;break;}}spin_unlock_irqrestore(&lIllI->IIllII,flags);if(IllII){int
 status;IlIlI=IlIIlIllI(lIllI,IllII,IIlIl,&status);if(IlIlI<(0x266+8823-0x24dd))
{
spin_lock_irqsave(&lIllI->IIllII,flags);if(lIIIlIII(IllII)){
spin_unlock_irqrestore(&lIllI->IIllII,flags);IllIIllI(IllII,-ECONNRESET);
IIlIlllI(IllII);}else{



list_add_tail(&IllII->llllIl,&lIllI->lllIlllI);spin_unlock_irqrestore(&lIllI->
IIllII,flags);}}else{IllIIllI(IllII,status);IIlIlllI(IllII);}}else{lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x77\x72\x69\x74\x65\x5f\x75\x6e\x72\x62\x3a\x20\x72\x65\x71\x75\x65\x73\x74\x20\x6e\x6f\x74\x20\x66\x6f\x75\x6e\x64" "\n"
);IlIlI=(0x5c6+752-0x8b6);}lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x69\x6f\x63\x74\x6c\x5f\x77\x72\x69\x74\x65\x5f\x75\x6e\x72\x62\x3a\x20\x2d\x2d\x20\x72\x65\x73\x75\x6c\x74\x3d\x25\x64" "\n"
,IlIlI);return IlIlI;}int IllIIIllI(struct lIlIIl*lIllI,struct IIlllIIll __user*
ioctl){lllII IlIll;lllII devnum;lllII busnum;if(get_user(IlIll,&ioctl->lIIlII.
lIlllll)<(0x7fa+5824-0x1eba)){return-EFAULT;}if(IlIll!=sizeof(struct IIlllIIll))
{return-EINVAL;}IllIlIlII(lIllI,&busnum,&devnum);if(put_user(busnum,&ioctl->
busnum)<(0x1428+1903-0x1b97)){return-EFAULT;}if(put_user(devnum,&ioctl->devnum)<
(0xc09+2104-0x1441)){return-EFAULT;}return(0x2c8+8070-0x224e);}long IlIIIllII(
void*context,unsigned int lIIIIl,void __user*IlIIII){struct lIlIIl*lIllI=context
;int IlIlI=(0x1130+2612-0x1b64);lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x69\x6f\x63\x74\x6c\x3a\x20\x2b\x2b\x20\x63\x6d\x64\x3d\x25\x64\x20\x61\x72\x67\x3d\x30\x78\x25\x70" "\n"
,lIIIIl,IlIIII);switch(lIIIIl){case llIIlIlII:IlIlI=lIIlIllII(lIllI,IlIIII);
break;case IllIIIlII:IlIlI=lIIlllIIIl(lIllI,IlIIII);break;case IllllIllI:IlIlI=
IllIIIllI(lIllI,IlIIII);break;default:lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x69\x6f\x63\x74\x6c\x3a\x20\x75\x6e\x6b\x6e\x6f\x77\x6e\x20\x69\x6f\x63\x74\x6c" "\n"
);IlIlI=-EINVAL;break;}lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x69\x6f\x63\x74\x6c\x3a\x20\x2d\x2d\x20\x72\x65\x73\x75\x6c\x74\x3d\x25\x64" "\n"
,IlIlI);return IlIlI;}long lIlIIIIIl(void*context,unsigned int lIIIIl,unsigned 
long IlIIII){return IlIIIllII(context,lIIIIl,(void __user*)IlIIII);}
#ifdef CONFIG_COMPAT
long IllIlllII(void*context,unsigned int lIIIIl,unsigned long IlIIII){return 
IlIIIllII(context,lIIIIl,compat_ptr(IlIIII));}
#endif
int IIlllIIlI(void*context,struct vm_area_struct*llIIIlI){int IlIlI;struct 
lIlIIl*lIllI=context;void*IllIl;unsigned long IIlIIl;unsigned long offset;lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x6d\x6d\x61\x70\x3a\x20\x2b\x2b" "\n"
);IIlIIl=llIIIlI->vm_end-llIIIlI->vm_start;offset=llIIIlI->vm_pgoff<<PAGE_SHIFT;
if(IIlIIl<sizeof(IlIllI)||IIlIIl>lIlIlIII){lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x6d\x6d\x61\x70\x3a\x20\x2d\x2d\x20\x69\x6e\x76\x61\x6c\x69\x64\x20\x6c\x65\x6e\x67\x74\x68" "\n"
);return-EINVAL;}if(offset!=(0xd1d+3471-0x1aac)&&offset!=0x80000000U){lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x6d\x6d\x61\x70\x3a\x20\x2d\x2d\x20\x69\x6e\x76\x61\x6c\x69\x64\x20\x6f\x66\x66\x73\x65\x74" "\n"
);return-EINVAL;}IllIl=vmalloc(IIlIIl);if(IllIl==NULL){lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x6d\x6d\x61\x70\x3a\x20\x6e\x6f\x20\x6d\x65\x6d\x6f\x72\x79\x20\x66\x6f\x72\x20\x77\x72\x69\x74\x65\x62\x75\x66" "\n"
);return-ENOMEM;}
IlIlI=lIIIIIIII(IllIl,llIIIlI);if(IlIlI==(0x6db+2264-0xfb3)){if(offset==
(0x94+2840-0xbac)){lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x6d\x6d\x61\x70\x3a\x20\x6d\x61\x70\x20\x72\x65\x61\x64\x62\x75\x66" "\n"
);if(lIllI->IIlIIlIl){vfree(lIllI->IIlIIlIl);}lIllI->IIlIIlIl=IllIl;lIllI->
llIlllll=IIlIIl;}else{lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x6d\x6d\x61\x70\x3a\x20\x6d\x61\x70\x20\x77\x72\x69\x74\x65\x62\x75\x66" "\n"
);if(lIllI->lllIllll){vfree(lIllI->lllIllll);}lIllI->lllIllll=IllIl;lIllI->
IIlIIIIl=IIlIIl;}}lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x6d\x6d\x61\x70\x3a\x20\x2d\x2d\x20\x72\x65\x73\x75\x6c\x74\x3d\x25\x64" "\n"
,IlIlI);return IlIlI;}

int IlllIIlIl(void*context,int IIIIIlI){int IlIlI=(0x4b9+7353-0x2172);struct 
lIlIIl*lIllI=context;lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x6f\x70\x65\x6e\x3a\x20\x2b\x2b\x20\x25\x64" "\n"
,IIIIIlI);if(IIIIIlI==(0x753+355-0x8b5)){
lIllI=lIllI;
}lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x6f\x70\x65\x6e\x3a\x20\x2d\x2d\x20\x72\x65\x73\x75\x6c\x74\x3d\x25\x64" "\n"
,IlIlI);return IlIlI;}

int lllIllIII(void*context,int IIIIIlI){struct lIlIIl*lIllI=context;lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x72\x65\x6c\x65\x61\x73\x65\x20\x25\x64" "\n"
,IIIIIlI);if(IIIIIlI==(0x19f+4225-0x1220)){if(lIllI->IIlIIlIl){vfree(lIllI->
IIlIIlIl);lIllI->IIlIIlIl=NULL;}if(lIllI->lllIllll){vfree(lIllI->lllIllll);lIllI
->lllIllll=NULL;}

}return(0x1d94+1194-0x223e);}void llIllIllI(void*context){struct lIlIIl*lIllI=
context;IlllllII(lIllI);}void IlllllIII(void*context){struct lIlIIl*lIllI=
context;IlIllIIl(lIllI);}unsigned int IllllIIll(void*context,struct file*lIlllI,
poll_table*lIIllI){int IIllIIII;unsigned long flags;struct lIlIIl*lIllI=context;
poll_wait(lIlllI,&lIllI->lIIllI,lIIllI);spin_lock_irqsave(&lIllI->IIllII,flags);
IIllIIII=list_empty(&lIllI->llIllIl);spin_unlock_irqrestore(&lIllI->IIllII,flags
);if(!IIllIIII&&!lIllI->IlIlIIll){lIlll(
"\x75\x73\x62\x64\x5f\x76\x73\x74\x75\x62\x5f\x6d\x69\x6e\x6f\x72\x5f\x70\x6f\x6c\x6c\x3a\x20\x71\x75\x65\x75\x65\x20\x6e\x6f\x74\x20\x65\x6d\x70\x74\x79" "\n"
);return((POLLOUT|POLLWRNORM)|(POLLIN|POLLRDNORM));}return(POLLOUT|POLLWRNORM);}
#endif 

